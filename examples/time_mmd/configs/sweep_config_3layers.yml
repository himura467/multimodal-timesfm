# WandB Sweep Configuration for Multimodal TimesFM Hyperparameter Tuning (3-layer fusion)
# This configuration uses Climate as validation, Energy as test, and all others as training
# Optimizes based on test MSE on Energy dataset

# Sweep method: random, grid, or bayes
method: bayes

# Metric to optimize (test MSE on Energy dataset)
metric:
  name: test_mse
  goal: minimize

# Hyperparameter search space
parameters:
  # Learning rate
  learning_rate:
    distribution: log_uniform_values
    min: 1e-5
    max: 1e-3

  # Weight decay (L2 regularization)
  weight_decay:
    distribution: log_uniform_values
    min: 1e-4
    max: 1e-1

  # Batch size
  batch_size:
    values: [4, 8, 16, 32]

  # Gradient accumulation steps
  gradient_accumulation_steps:
    values: [1, 2, 4, 8]

  # Number of training epochs
  num_epochs:
    values: [5, 10, 15, 20]

  # Number of fusion layers (3-layer projection with two hidden dims)
  num_fusion_layers:
    value: 3

  # Hidden dimension for first hidden layer (text_dim -> fusion_hidden_dim_1)
  fusion_hidden_dim_1:
    distribution: int_uniform
    min: 256
    max: 2048

  # Hidden dimension for second hidden layer (fusion_hidden_dim_1 -> fusion_hidden_dim_2)
  fusion_hidden_dim_2:
    distribution: int_uniform
    min: 256
    max: 2048
